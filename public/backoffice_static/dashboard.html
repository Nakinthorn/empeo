<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon"
        href="https://media.discordapp.net/attachments/1065176955445587988/1123534910381117491/350885243_2871046769695349_6895795451906942072_n.jpg?width=372&height=580">

    <title>Dashboard</title>
    <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">

    <!-- CSS -->
    <link rel="stylesheet" href="./global.css">
    <script src="./global.js"></script>

    <!-- Fontawesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css"
        integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- Swal2 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/11.0.11/sweetalert2.all.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"
        integrity="sha512-E8QSvWZ0eCLGk4km3hxSsNmGWbLtSCSUcewDQPQWZF6pEU8GlT8a5fF32wOl1i8ftdMhssTrF/OhyGWwonTcXA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.7.0.js"
        integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=" crossorigin="anonymous"></script>

    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>

    <!-- CSS -->
    <link rel="stylesheet" href="./global_hrm.css" />

    <!-- Global JS -->
    <script src='./global_js.js'></script>
    <script src="config.js"></script>
    <!-- This css font  -->
    <link
        href="https://fonts.googleapis.com/css2?family=Kanit:wght@100;200;300;400;500&family=Poppins:wght@100;200;300;400;500;600;700;800;900&family=Sarabun:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,100&display=swap"
        rel="stylesheet">

    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.3.1/main.min.css' rel='stylesheet' />
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.3.1/main.min.js'></script>
</head>
<style>
    html,
    body {
        height: 100%;
        margin: 0;
        padding: 0;
    }

    * {
        margin: 0;
        padding: 0;
    }

    .dashboard-container {
        margin-left: 6vw;
        padding: 20px;
        width: 900px;
        box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;
        border-radius: 13px;
    }

    .rights-container {
        width: 320px;
    }

    .detail-admin {
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .box {
        border: solid 1px grey;
        border-radius: 13px;
        width: 80px;
        height: 80px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .rights {
        padding: 10px;
        box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;
        border-radius: 13px;
        height: 150px;
        line-height: 28px;
    }

    .leave-box {
        display: flex;
        justify-content: space-between;
    }

    .leave-box p {
        font-size: 13px;
    }

    #calendar {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        border: 1px solid #ccc;
        border-radius: 5px;
        overflow: hidden;
        max-width: 900px;
        height: 60%;
        margin-top: 10px;
    }

    #calendar>div {
        text-align: center;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
    }

    #calendar .day-header {
        font-weight: bold;
    }

    #monthName {
        background-color: #009688;
        color: #fff;
        padding: 10px;
        border-radius: 7px;
    }

    #calendar .current-day {
        background-color: #009688;
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: auto;
        width: 8px;
        height: 8px;
    }

    .head-calendar {
        display: flex;
        align-items: center;
        gap: 40px;
    }

    #prevBtn,
    #nextBtn {
        color: #009688;
        font-size: 30px;
        cursor: pointer;
    }

    .day-week {
        color: #007268;
    }
</style>

<body style="overflow: hidden;">
    <script>
        $.get("./menu-top.html", function (data) {
            $("#sidebar-tabtop").html(data);
        });
    </script>
    <script>
        $.get("./menu-left.html", function (data) {
            $("#sidebar-tableft").html(data);
        });
    </script>

    <div id="sidebar-tableft"></div>
    <div style="width: calc(100% - 60px);">
        <div id="sidebar-tabtop">

        </div>
        <div>

        </div>
    </div>
    <br>
    <div style="display: flex; gap: 30px;">
        <div class="dashboard-container">
            <div class="detail-admin">
                <div style="display: flex; align-items: center;">
                    <div>
                        <img id="admin-image" src="./symbol_hrm/avatar.png" width="100">
                        <p id="admin-id">#00001</p>
                    </div>
                    <div style="margin-left: 20px;">
                        <p id="admin-name">Admin name</p>
                        <p id="admin-position" style="font-size: 14px; color: grey;">กรรมการผู้จัดการ (CEO)</p>
                        <div style="display: flex; gap: 20px;">
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <i class="fa-solid fa-envelope" style="color: #9e9fa5;"></i>
                                <p id="admin-email">admin@email.com</p>
                            </div>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <i class="fa-solid fa-phone" style="color: #9e9fa5;"></i>
                                <p id="admin-tel">0000000000</p>
                            </div>       
                        </div>
                    </div>
                </div>

                <div style="display: flex; align-items: center; gap: 20px;">
                    <div class="box">
                        <div style="text-align: center;">
                            <p>0</p>
                            <p>ขาดงาน</p>
                        </div>
                    </div>
                    <div class="box">
                        <div style="text-align: center;">
                            <p>0</p>
                            <p>กลับก่อน</p>
                        </div>
                    </div>
                    <div class="box">
                        <div style="text-align: center;">
                            <p>0</p>
                            <p>สาย</p>
                        </div>
                    </div>
                </div>
            </div>

            <div>
                <div class="head-calendar">
                    <i id="prevBtn" class="fa-solid fa-arrow-left"></i>
                    <h3 id="monthName"></h3>
                    <i id="nextBtn" class="fa-solid fa-arrow-left fa-rotate-180"></i>
                </div>
                <div id="calendar">

                </div>

            </div>
        </div>
        <br>
        <div class="rights-container">
            <div class="rights">
                <p style="font-size: 18px;">ข้อมูลการทำงาน</p>
                <p style="font-size: 12px;">พนักงานที่หยุดงานในวันนี้</p>
                <div style="text-align: center;">
                    <p style="font-size: 12px; color: grey;">วันนี้ไม่มีพนักงานลาหยุด</p>
                    <hr>
                </div>
                <p style="font-size: 12px;">พนักงานที่ปฏิบัติงานนอกสถานที่ในวันนี้</p>
                <div style="text-align: center;">
                    <p style="font-size: 12px; color: grey;">วันนี้ไม่มีพนักงานที่ปฏิบัติงานนอกสถานที่</p>
                </div>
            </div>
            <br>
            <div class="rights">
                <p style="font-size: 18px;">สิทธิ์การลาคงเหลือ</p>
                <div class="leave-box">
                    <p>ลาหยุดพักร้อนประจำปี</p>
                    <p>6 วัน</p>
                </div>
                <div class="leave-box">
                    <p>ลากิจ</p>
                    <p>6 วัน</p>
                </div>
                <div class="leave-box">
                    <p>ลาคลอด</p>
                    <p>6 วัน</p>
                </div>
                <div class="leave-box">
                    <p>ลาคลอดไม่รับค่าจ้าง</p>
                    <p>6 วัน</p>
                </div>
            </div>
        </div>
    </div>
    <script>
        let ENDPOINT = window.API_URL;

        var myHeaders = new Headers();
        myHeaders.append("Content-Type", "application/json");

        var raw = JSON.stringify({
            "token": localStorage.token
        });

        var requestOptions = {
            method: 'POST',
            headers: myHeaders,
            body: raw,
            redirect: 'follow'
        };
        
        fetch(ENDPOINT + "api/getDataAdmin", requestOptions)
            .then(response => {
                return response.json()
            })
            .then(result => {
                const data = result.data[0]
                console.log(data);

                const adminId = document.getElementById("admin-id");
                adminId.innerHTML = `<p style="font-size: 20px; text-align: center;">${data.employee_id ? data.employee_id : '#1'}</p>`;

                const adminName = document.getElementById("admin-name");
                adminName.innerHTML = `<p style="font-size: 24px;">${data.fname ? data.fname : 'Admin'} ${data.lname ? data.lname : ' '}</p>`;


                const adminImage = document.getElementById("admin-image");
                adminImage.innerHTML = `<img src="${data.img_profile}" alt="Admin Image">`;

                const adminPosition = document.getElementById("admin-position");
                adminPosition.innerHTML = `<p style="font-size: 14px; color: grey;">${data.job_title ? data.job_title : 'Admin'}</p>`;

                const adminTel = document.getElementById("admin-tel");
                adminTel.innerHTML = `<p style="color: grey;">${data.contact_info ? data.contact_info : 'xxx-xxxxxxx'}</p>`;

                const adminEmail = document.getElementById("admin-email");
                adminEmail.innerHTML = `<p style="color: grey;">${data.email}</p>`;

            })
            .catch(error => {
                console.log('error', error)
            });
    </script>
    <script>
        let currentYear, currentMonth;

        const monthNames = [
            "January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"
        ];

        function createCalendar(year, month) {
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const firstDayIndex = new Date(year, month, 1).getDay();

            const calendarElement = document.getElementById('calendar');
            calendarElement.innerHTML = '';

            const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thur', 'Fri', 'Sat'];
            for (let dayOfWeek of daysOfWeek) {
                const dayOfWeekElement = document.createElement('div');

                if (dayOfWeek === 'Sun' || dayOfWeek === 'Sat') {
                    dayOfWeekElement.style.color = 'red';
                    dayOfWeekElement.style.fontWeight = '800';
                    dayOfWeekElement.style.fontSize = '20px';
                } else {
                    dayOfWeekElement.style.color = '#007268';
                    dayOfWeekElement.style.fontWeight = '800';
                    dayOfWeekElement.style.fontSize = '20px';
                }

                dayOfWeekElement.textContent = dayOfWeek;
                calendarElement.appendChild(dayOfWeekElement);
            }

            for (let i = 0; i < firstDayIndex; i++) {
                const emptyDayElement = document.createElement('div');
                calendarElement.appendChild(emptyDayElement);
            }

            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.textContent = day;
                calendarElement.appendChild(dayElement);

                const currentDate = new Date();
                if (year === currentDate.getFullYear() && month === currentDate.getMonth() && day === currentDate.getDate()) {
                    dayElement.classList.add('current-day');
                }
            }
        }

        function updateCalendar() {
            createCalendar(currentYear, currentMonth);
            document.getElementById('monthName').textContent = monthNames[currentMonth] + ' ' + currentYear;
        }

        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');

        prevBtn.addEventListener('click', () => {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            updateCalendar();
        });

        nextBtn.addEventListener('click', () => {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            updateCalendar();
        });

        const currentDate = new Date();
        currentYear = currentDate.getFullYear();
        currentMonth = currentDate.getMonth();
        updateCalendar();
    </script>
</body>

</html>